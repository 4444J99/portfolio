---
import Layout from '../layouts/Layout.astro';
import SketchContainer from '../components/sketches/SketchContainer.astro';

const communityRepos = [
  {
    name: 'Salon Archive',
    repo: 'organvm-vi-koinonia/salon-archive',
    description: 'Structured archive of interdisciplinary salon conversations spanning philosophy, technology, aesthetics, and systems thinking. Each session follows a facilitated format: provocation, structured dialogue, synthesis.',
    discussionUrl: 'https://github.com/organvm-vi-koinonia/salon-archive/discussions',
    tags: ['salons', 'interdisciplinary', 'facilitated dialogue'],
  },
  {
    name: 'Reading Group Curriculum',
    repo: 'organvm-vi-koinonia/reading-group-curriculum',
    description: 'Curated reading sequences organized by theme — recursion, governance, generative systems, institutional design. Each curriculum includes primary texts, discussion questions, and synthesis prompts.',
    discussionUrl: 'https://github.com/organvm-vi-koinonia/reading-group-curriculum/discussions',
    tags: ['reading groups', 'curriculum', 'structured inquiry'],
  },
  {
    name: 'Adaptive Personal Syllabus',
    repo: 'organvm-vi-koinonia/adaptive-personal-syllabus',
    description: 'Self-directed learning framework that adapts to individual pace and interest. Tracks reading progress, generates connections between texts, and suggests next readings based on completed material.',
    discussionUrl: 'https://github.com/organvm-vi-koinonia/adaptive-personal-syllabus/discussions',
    tags: ['self-directed', 'adaptive learning', 'personal curriculum'],
  },
];
---

<Layout title="Community — Institutional Framework" description="Architectural infrastructure for community engagement: salons, reading groups, and adaptive learning environments across the eight-organ system.">
    <div class="sketch-accent">
      <SketchContainer sketchId="counterpoint" height="var(--space-5xl)" mobileHeight="var(--space-4xl)" ariaLabel="Animated counterpoint visualization representing dialogue and harmony" data-voices={communityRepos.map(r => r.name).join(',')} />
    </div>
    <section class="section">
      <div class="container">
        <h1 class="page-title">Community Architecture</h1>
        <p class="page-sub">
          ORGAN-VI (Koinonia) orchestrates the system's communal surface area. We build infrastructure for interdisciplinary salons, structured inquiry, and adaptive curricula—facilitating high-signal knowledge exchange through validated participation formats.
        </p>

        <h2 class="section__heading">Community Repositories</h2>
        <div class="community-grid">
          {communityRepos.map(repo => (
            <div class="community-card">
              <h3 class="community-card__name">{repo.name}</h3>
              <p class="community-card__desc">{repo.description}</p>
              <div class="community-card__tags">
                {repo.tags.map(tag => (
                  <span class="community-card__tag">{tag}</span>
                ))}
              </div>
              <div class="community-card__links">
                <a href={repo.discussionUrl} target="_blank" rel="noopener noreferrer" class="community-card__discuss-link">
                  Join Discussion
                </a>
                <a href={`https://github.com/${repo.repo}`} target="_blank" rel="noopener noreferrer">
                  GitHub
                </a>
              </div>
            </div>
          ))}
        </div>

        <div class="community-formats">
          <h2 class="formats-heading">Participation Formats</h2>
          <div class="format-grid">
            <div class="format-item">
              <h3>Salons</h3>
              <p>Facilitated interdisciplinary conversations following a three-phase format: provocation (15 min), structured dialogue (45 min), and collective synthesis (15 min). Sessions are archived with key insights and emergent questions.</p>
            </div>
            <div class="format-item">
              <h3>Reading Groups</h3>
              <p>Thematic reading sequences with discussion questions and synthesis prompts. Each curriculum spans 4-8 weeks and connects texts across disciplines — philosophy, systems theory, aesthetics, institutional design.</p>
            </div>
            <div class="format-item">
              <h3>Adaptive Learning</h3>
              <p>Self-paced curriculum that tracks your reading, surfaces connections between completed texts, and suggests next readings based on your interests and the system's knowledge graph.</p>
            </div>
          </div>
        </div>
      </div>
    </section>
</Layout>

<style>
  .page-sub {
    max-width: 42em;
  }

  .community-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: var(--space-lg);
    margin-bottom: var(--space-3xl);
  }

  .community-card {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: var(--space-lg);
    display: flex;
    flex-direction: column;
    gap: var(--space-sm);
    transition: border-color var(--transition-fast);
  }

  .community-card:hover {
    border-color: var(--text-muted);
  }

  .community-card__name {
    font-size: 1.1rem;
    font-weight: 600;
    margin: 0;
  }

  .community-card__desc {
    font-size: 0.88rem;
    color: var(--text-secondary);
    line-height: 1.5;
    flex: 1;
  }

  .community-card__tags {
    display: flex;
    gap: var(--space-xs);
    flex-wrap: wrap;
  }

  .community-card__tag {
    font-size: 0.7rem;
    color: var(--text-muted);
    border: 1px solid var(--border);
    border-radius: 3px;
    padding: 0.15em 0.5em;
    text-transform: lowercase;
  }

  .community-card__links {
    display: flex;
    gap: var(--space-md);
    font-size: 0.85rem;
    padding-top: var(--space-xs);
    border-top: 1px solid var(--border);
  }

  .community-card__links a {
    color: var(--text-secondary);
    text-decoration: none;
    transition: color var(--transition-fast);
  }

  .community-card__links a:hover {
    color: var(--text-primary);
  }

  .community-card__discuss-link {
    color: var(--accent-text) !important;
    font-weight: 500;
  }

  .community-formats {
    border-top: 1px solid var(--border);
    padding-top: var(--space-2xl);
  }

  .formats-heading {
    font-size: 1.3rem;
    margin-bottom: var(--space-lg);
  }

  .format-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: var(--space-lg);
  }

  .format-item h3 {
    font-size: 0.95rem;
    font-weight: 600;
    margin-bottom: var(--space-xs);
  }

  .format-item p {
    font-size: 0.85rem;
    color: var(--text-secondary);
    line-height: 1.55;
  }

  @media (max-width: 768px) {
    .community-grid,
    .format-grid {
      grid-template-columns: 1fr;
    }
  }
</style>
