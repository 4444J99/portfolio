---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import SketchContainer from '../components/sketches/SketchContainer.astro';

const products = [
  {
    name: 'Gamified Coach Interface',
    repo: 'organvm-iii-ergon/gamified-coach-interface',
    type: 'SaaS',
    status: 'Production-Ready',
    description: 'Holographic 3D fitness coaching visualization built with Three.js and Vite. Interactive orbital node system for strategy mapping and progress tracking.',
    stack: ['Three.js', 'Vite', 'TypeScript'],
    demo: 'https://organvm-iii-ergon.github.io/gamified-coach-interface/',
    featured: true,
  },
  {
    name: 'Public Record Data Scrapper',
    repo: 'organvm-iii-ergon/public-record-data-scrapper',
    type: 'B2B',
    status: 'Production-Ready',
    description: 'Automated public records aggregation and analysis platform. React 19 frontend, Express API, PostgreSQL, Tauri desktop app (Rust), Terraform AWS infrastructure. 2,055 tests.',
    stack: ['React', 'Express', 'PostgreSQL', 'Rust/Tauri', 'Terraform', 'Docker'],
  },
  {
    name: 'Trade Perpetual Future',
    repo: 'organvm-iii-ergon/trade-perpetual-future',
    type: 'B2B',
    status: 'In Development',
    description: 'Perpetual futures trading interface with React 19, Solana/Drift Protocol integration, and real-time analytics. 53 Vitest tests, Cloudflare Pages deployment.',
    stack: ['Python', 'React', 'Solana', 'Vitest', 'Cloudflare'],
  },
  {
    name: 'Sovereign Ecosystem — Real Estate Luxury',
    repo: 'organvm-iii-ergon/sovereign-ecosystem--real-estate-luxury',
    type: 'B2B2C',
    status: 'Prototype',
    description: 'Luxury real estate marketplace with React frontend, Tailwind CSS, and multi-party transaction orchestration.',
    stack: ['TypeScript', 'React', 'Tailwind'],
  },
  {
    name: 'Universal Mail Automation',
    repo: 'organvm-iii-ergon/universal-mail--automation',
    type: 'B2B',
    status: 'Prototype',
    description: 'Cross-platform mail automation engine with Python backend, AppleScript macOS integration, and scheduling.',
    stack: ['Python', 'AppleScript', 'Shell'],
  },
  {
    name: 'Search Local — Happy Hour',
    repo: 'organvm-iii-ergon/search-local--happy-hour',
    type: 'B2C',
    status: 'Prototype',
    description: 'Location-aware discovery platform for local dining and nightlife. React frontend with Tailwind CSS.',
    stack: ['TypeScript', 'React', 'Tailwind'],
  },
  {
    name: 'Fetch Familiar Friends',
    repo: 'organvm-iii-ergon/fetch-familiar-friends',
    type: 'B2C',
    status: 'In Development',
    description: 'Social pet adoption and community platform. JavaScript frontend, PostgreSQL database with PLpgSQL schemas.',
    stack: ['JavaScript', 'PostgreSQL', 'React'],
  },
  {
    name: 'Multi-Camera Livestream Framework',
    repo: 'organvm-iii-ergon/multi-camera--livestream--framework',
    type: 'B2B2C',
    status: 'Production-Ready',
    description: 'Multi-source 4K livestream orchestration with Dante audio networking, scene switching, and audience interaction.',
    stack: ['Shell', 'FFmpeg', 'Dante'],
  },
  {
    name: 'Tab Bookmark Manager',
    repo: 'organvm-iii-ergon/tab-bookmark-manager',
    type: 'SaaS',
    status: 'In Development',
    description: 'Browser extension with Python ML backend, PostgreSQL, Redis, Puppeteer scraping, and Docker deployment.',
    stack: ['JavaScript', 'Python', 'PostgreSQL', 'Redis', 'Docker'],
  },
  {
    name: 'The Actual News',
    repo: 'organvm-iii-ergon/the-actual-news',
    type: 'B2C',
    status: 'In Development',
    description: 'Verifiable news platform with Express microservices architecture (4 services), Docker Compose orchestration, and source transparency scoring.',
    stack: ['Express', 'Docker', 'TypeScript'],
  },
  {
    name: 'Your Fit Tailored',
    repo: 'organvm-iii-ergon/your-fit-tailored',
    type: 'B2C',
    status: 'Prototype',
    description: 'Circular apparel platform seed with personalized fit algorithms and subscription-based delivery.',
    stack: ['JavaScript'],
  },
  {
    name: 'Classroom RPG Aetheria',
    repo: 'organvm-iii-ergon/classroom-rpg-aetheria',
    type: 'SaaS',
    status: 'In Development',
    description: 'Gamified classroom management RPG. Next.js + React frontend, Python backend. 192 code files, 16 test files.',
    stack: ['Next.js', 'React', 'Python', 'Tailwind'],
  },
];

const typeBadgeColors: Record<string, string> = {
  SaaS: '#6366f1',
  B2B: '#0891b2',
  B2C: '#16a34a',
  B2B2C: '#ca8a04',
};

const statusColors: Record<string, string> = {
  'Production-Ready': '#4CAF50',
  'In Development': '#FF9800',
  'Prototype': '#9E9E9E',
};

const typeGroups: Record<string, number> = { SaaS: 0, B2B: 0, B2C: 0, B2B2C: 0 };
products.forEach((p: any) => { if (typeGroups[p.type] !== undefined) typeGroups[p.type]++; });
---

<Layout title="Products & Platforms" description="ORGAN-III commerce products: SaaS, B2B, B2C, and B2B2C platforms across 12 applications in various stages of development.">
  <Header />
  <main id="main-content">
    <div class="sketch-accent">
      <SketchContainer sketchId="pipeline" height="250px" mobileHeight="180px" ariaLabel="Animated pipeline visualization representing commerce flow" data-chambers={Object.keys(typeGroups).join(',')} data-counts={Object.values(typeGroups).join(',')} />
    </div>
    <section class="section">
      <div class="container">
        <h1 class="page-title">Products & Platforms</h1>
        <p class="page-sub">
          {products.length} products spanning SaaS platforms,
          B2B tools, B2C consumer applications, and hybrid B2B2C marketplaces.
          Each product lists its current development status and technology stack.
        </p>

        <div class="product-grid">
          {products.map(p => (
            <div class:list={['product-card', { 'product-card--featured': p.featured }]}>
              {p.featured && <span class="product-card__featured-badge">Live Demo</span>}
              <div class="product-card__header">
                <h3 class="product-card__name">{p.name}</h3>
                <span class="product-card__type" style={`--type-color: ${typeBadgeColors[p.type] || '#888'}`}>
                  {p.type}
                </span>
              </div>
              <p class="product-card__desc">{p.description}</p>
              <div class="product-card__meta">
                <span class="product-card__status-badge" style={`--status-color: ${statusColors[p.status] || '#888'}`}>{p.status}</span>
                {p.stack && <span class="product-card__stack">{p.stack.join(' · ')}</span>}
              </div>
              <div class="product-card__links">
                <a href={`https://github.com/${p.repo}`} target="_blank" rel="noopener">GitHub</a>
                {p.demo && <a href={p.demo} target="_blank" rel="noopener" class="product-card__demo-link">Live Demo</a>}
              </div>
            </div>
          ))}
        </div>
      </div>
    </section>
  </main>
  <Footer />
</Layout>

<style>
  .page-title {
    margin-bottom: var(--space-sm);
  }

  .page-sub {
    margin-bottom: var(--space-2xl);
    max-width: 42em;
  }

  .product-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: var(--space-lg);
  }

  .product-card {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: var(--space-lg);
    display: flex;
    flex-direction: column;
    gap: var(--space-sm);
    transition: border-color var(--transition-fast);
    position: relative;
  }

  .product-card:hover {
    border-color: var(--text-muted);
  }

  .product-card--featured {
    border-color: var(--accent);
    grid-column: 1 / -1;
  }

  .product-card__featured-badge {
    position: absolute;
    top: var(--space-sm);
    right: var(--space-sm);
    background: var(--accent);
    color: var(--bg-primary);
    font-size: 0.7rem;
    font-weight: 600;
    text-transform: uppercase;
    padding: 0.2em 0.6em;
    border-radius: 3px;
    letter-spacing: 0.05em;
  }

  .product-card__header {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    flex-wrap: wrap;
  }

  .product-card__name {
    font-size: 1.05rem;
    font-weight: 600;
    margin: 0;
  }

  .product-card__type {
    font-size: 0.7rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    padding: 0.15em 0.5em;
    border-radius: 3px;
    border: 1px solid var(--type-color);
    color: var(--type-color);
  }

  .product-card__desc {
    font-size: 0.88rem;
    color: var(--text-secondary);
    line-height: 1.5;
    flex: 1;
  }

  .product-card__meta {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: var(--space-sm);
    font-size: 0.78rem;
    color: var(--text-muted);
    font-family: var(--font-mono);
  }

  .product-card__status-badge {
    font-size: 0.7rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    padding: 0.15em 0.5em;
    border-radius: 3px;
    border: 1px solid var(--status-color);
    color: var(--status-color);
  }

  .product-card__stack {
    font-size: 0.72rem;
    color: var(--text-muted);
  }

  .product-card__links {
    display: flex;
    gap: var(--space-md);
    font-size: 0.85rem;
    padding-top: var(--space-xs);
    border-top: 1px solid var(--border);
  }

  .product-card__links a {
    color: var(--text-secondary);
    text-decoration: none;
    transition: color var(--transition-fast);
  }

  .product-card__links a:hover {
    color: var(--text-primary);
  }

  .product-card__demo-link {
    color: var(--accent) !important;
    font-weight: 500;
  }

  @media (max-width: 768px) {
    .product-card--featured {
      grid-column: auto;
    }

    .product-grid {
      grid-template-columns: 1fr;
    }
  }
</style>
