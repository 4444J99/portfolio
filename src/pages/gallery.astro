---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import SketchContainer from '../components/sketches/SketchContainer.astro';

const sketches = [
  { id: 'hero', label: 'Organ Breathing', context: 'Homepage' },
  { id: 'organ-system', label: 'Organ System', context: 'Architecture' },
  { id: 'recursive-tree', label: 'Recursive Tree', context: 'RE:GE' },
  { id: 'counterpoint', label: 'Counterpoint', context: 'Generative Music' },
  { id: 'pipeline', label: 'Pipeline Flow', context: 'Orchestration' },
  { id: 'token-stream', label: 'Token Stream', context: 'AI Conductor' },
  { id: 'network-graph', label: 'Network Graph', context: 'Knowledge Base' },
  { id: 'flow-diagram', label: 'Flow Diagram', context: 'Agentic Titan' },
  { id: 'data-bars', label: 'Data Bars', context: 'Dashboard' },
  { id: 'particle-field', label: 'Particle Field', context: 'About' },
  { id: 'terrain', label: 'Terrain', context: 'TurfSynth AR' },
  { id: 'conductor', label: 'Conductor', context: 'AI Conductor' },
  { id: 'octagon', label: 'Octagon', context: 'Eight-Organ System' },
  { id: 'waveform', label: 'Waveform', context: 'Generative Music' },
  { id: 'swarm', label: 'Swarm', context: 'Agentic Titan' },
  { id: 'deliberation', label: 'Deliberation', context: 'AI Council' },
  { id: 'blocks', label: 'Blocks', context: 'TurfSynth AR' },
  { id: 'constellation', label: 'Constellation', context: 'Community' },
  { id: 'scatter', label: 'Scatter', context: 'Dashboard' },
  { id: 'spiral', label: 'Spiral', context: 'Recursive Engine' },
  { id: 'orbits', label: 'Orbits', context: 'Orchestration Hub' },
  { id: 'atoms', label: 'Atoms', context: 'LingFrame' },
  { id: 'kaleidoscope', label: 'Kaleidoscope', context: 'Metasystem Master' },
  { id: 'lenses', label: 'Lenses', context: 'Narratological Lenses' },
  { id: 'routing', label: 'Routing', context: 'Distribution' },
  { id: 'hierarchy', label: 'Hierarchy', context: 'Org Architecture' },
  { id: 'typewriter', label: 'Typewriter', context: 'Public Process' },
  { id: 'ticker', label: 'Ticker', context: 'The Actual News' },
  { id: 'weave', label: 'Weave', context: 'Your Fit Tailored' },
];
---

<Layout title="Gallery — Generative Art" description="A collection of generative art sketches built with p5.js, each paired to a project in the eight-organ system.">
  <Header />
  <main id="main-content">
    <section class="section">
      <div class="container">
        <h1 class="page-title" data-reveal>Gallery</h1>
        <p class="page-sub" data-reveal style="animation-delay: 100ms">{sketches.length} generative sketches built with p5.js — each one paired to a project in the system.</p>

        <div class="gallery-grid">
          {sketches.map((sketch, i) => (
            <div class="gallery-item" data-reveal style={`animation-delay: ${Math.min(i * 40, 400)}ms`}>
              <SketchContainer
                sketchId={sketch.id}
                height="280px"
                mobileHeight="200px"
                ariaLabel={`Generative sketch: ${sketch.label}`}
              />
              <div class="gallery-item__info">
                <span class="gallery-item__label">{sketch.label}</span>
                <span class="gallery-item__context">{sketch.context}</span>
              </div>
            </div>
          ))}
        </div>
      </div>
    </section>
  </main>
  <Footer />
</Layout>

<style>
  .gallery-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: var(--space-xl);
  }

  .gallery-item {
    position: relative;
  }

  .gallery-item__info {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    padding: var(--space-sm) var(--space-xs);
    margin-top: var(--space-xs);
    background: var(--bg-card);
    border-radius: 4px;
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
  }

  .gallery-item__label {
    font-size: 0.8rem;
    font-weight: 500;
    color: var(--text-primary);
  }

  .gallery-item__context {
    font-size: 0.75rem;
    color: var(--text-muted);
  }

  @media (max-width: 768px) {
    .gallery-grid {
      grid-template-columns: 1fr;
    }
  }
</style>
