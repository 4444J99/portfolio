<script is:inline>
  // Theme restore â€” must be inline to avoid FOUC (runs before first paint)
  (function() {
    // Theme: 3-state (system/light/dark) with system as default
    var pref = localStorage.getItem('theme-preference') || 'system';
    var theme = pref === 'system'
      ? (window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark')
      : pref;
    document.documentElement.dataset.theme = theme;

    // Update theme-color meta
    var meta = document.querySelector('meta[name="theme-color"]');
    if (meta) meta.content = theme === 'light' ? '#f5f5f0' : '#0a0a0b';
  })();
</script>
