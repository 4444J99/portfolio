---
interface Props {
  sketchId: string;
  height?: string;
  mobileHeight?: string;
  ariaLabel: string;
  [key: string]: any;
}

const { sketchId, height = '500px', mobileHeight = '350px', ariaLabel, ...rest } = Astro.props;
const dataAttrs = Object.fromEntries(
  Object.entries(rest).filter(([k]) => k.startsWith('data-'))
);
---

<div
  class="sketch-container"
  data-sketch={sketchId}
  data-height={height}
  data-mobile-height={mobileHeight}
  role="img"
  aria-label={ariaLabel}
  tabindex="0"
  {...dataAttrs}
>
  <noscript>
    <p class="sketch-fallback">{ariaLabel}</p>
  </noscript>
</div>

<style>
  .sketch-container {
    width: 100%;
    position: relative;
    overflow: hidden;
    border-radius: 8px;
    border: 1px solid var(--border);
    background: var(--bg-card);
    backdrop-filter: blur(6px);
    -webkit-backdrop-filter: blur(6px);
  }

  .sketch-container :global(canvas) {
    display: block;
  }

  .sketch-fallback {
    padding: var(--space-xl);
    color: var(--text-muted);
    font-style: italic;
    text-align: center;
  }
</style>
