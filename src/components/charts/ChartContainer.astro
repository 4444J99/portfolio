---
interface Props {
  chartId: string;
  data?: unknown;
  ariaLabel: string;
  height?: string;
}

const { chartId, data, ariaLabel, height = '300px' } = Astro.props;
---

<div class="chart-container" data-chart={chartId} role="img" aria-label={ariaLabel} tabindex="0" style={`min-height: ${height}; position: relative;`}>
  {data && (
    <script type="application/json" set:html={JSON.stringify(data)} />
  )}
  <noscript>
    <p class="chart-fallback">{ariaLabel}</p>
  </noscript>
</div>

<style>
  .chart-container {
    width: 100%;
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: var(--space-lg);
    overflow: hidden;
  }

  .chart-container :global(svg) {
    display: block;
    width: 100%;
    height: auto;
  }

  .chart-fallback {
    padding: var(--space-xl);
    color: var(--text-muted);
    font-style: italic;
    text-align: center;
  }
</style>
